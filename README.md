# CYOA Updater Static

`CYOA_updater_static` — это инструмент, предназначенный для автоматического создания каталожных данных для статичных, основанных на изображениях игр в жанре "Choose Your Own Adventure" (CYOA). Он извлекает текст из изображений игры, анализирует его с помощью языковой модели (LLM) и генерирует структурированное описание в формате JSON, готовое для использования в каталоге.

Отличительной чертой проекта является генерация описаний в стиле "дерзкой суккубы", что придает каталогу уникальный и запоминающийся характер.

## Основные возможности

- **Оптическое распознавание символов (OCR):** Использует Google Cloud Vision API для извлечения текста непосредственно из файлов изображений CYOA.
- **Генерация контента с помощью ИИ:** Отправляет извлеченный текст большой языковой модели (LLM) для создания заголовков, описаний и тегов на основе сложного и настраиваемого шаблона (`prompt`).
- **Структурированный вывод:** Генерирует данные в формате JSON, включая название, описание, автора, теги и другую метаинформацию.
- **Кастомизируемый тон:** Шаблон промпта настроен на создание описаний от лица персонажа (дерзкой и игривой суккубы), что делает контент более живым и привлекательным.
- **Веб-интерфейс (опционально):** Наличие Flask в зависимостях предполагает возможность запуска простого веб-сервера для управления процессом или отображения результатов.

## Как это работает

1.  **Обработка изображений:** Скрипт принимает на вход изображения страниц CYOA.
2.  **Извлечение текста:** С помощью `google-cloud-vision` весь текст с изображений считывается и объединяется.
3.  **Запрос к LLM:** Извлеченный текст вместе с другой метаинформацией (список авторов, тегов) вставляется в шаблон из `prompts/static_cyoa_catalog_prompt.md`.
4.  **Генерация JSON:** Готовый промпт отправляется через API к большой языковой модели (например, Google Gemini или OpenAI GPT). Модель возвращает ответ в виде JSON-строки.
5.  **Сохранение результата:** Полученный JSON-файл сохраняется и может быть использован для обновления базы данных или фронтенда каталога CYOA.

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <your-repository-url>
    cd CYOA_updater_static-1
    ```

2.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Windows: venv\Scripts\activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Настройте переменные окружения:**
    Для работы с API Google Cloud Vision и, возможно, API языковой модели, вам понадобятся ключи доступа. Создайте файл `.env` в корневом каталоге проекта и добавьте в него необходимые переменные.

    Пример файла `.env`:
    ```
    # Путь к файлу ключа сервисного аккаунта Google Cloud
    GOOGLE_APPLICATION_CREDENTIALS="path/to/your/google-credentials.json"

    # Ключ API для языковой модели
    LLM_API_KEY="your_llm_api_key_here"
    ```

## Использование

*(Этот раздел следует дополнить конкретными командами для запуска скрипта)*

Пример команды для запуска обработки:
```bash
python main.py --input-dir /path/to/cyoa/images --output-dir /path/to/output
```

---

Проект использует библиотеки `Pillow` для работы с изображениями и `tqdm` для отображения прогресс-баров при обработке большого количества файлов.
